# 测试跨Tab复制粘贴图片功能

## 测试步骤

### 准备工作

1. 打开两个浏览器Tab,都加载思维导图应用
2. 在Tab1中创建一个包含图片的节点

### 测试场景1: 复制带图片的节点

**Tab1操作:**
1. 创建一个节点,添加一张图片(base64格式)
2. 选中该节点
3. 按 Ctrl+C 复制

**Tab2操作:**
1. 选中一个节点作为父节点
2. 按 Ctrl+V 粘贴
3. ✅ 验证: 粘贴的节点应该包含图片,且图片正常显示

### 测试场景2: 剪切带图片的节点

**Tab1操作:**
1. 创建一个节点,添加一张图片
2. 选中该节点
3. 按 Ctrl+X 剪切

**Tab2操作:**
1. 选中一个节点作为父节点
2. 按 Ctrl+V 粘贴
3. ✅ 验证: 粘贴的节点应该包含图片,且图片正常显示

### 测试场景3: 复制多个带图片的节点

**Tab1操作:**
1. 创建多个节点,每个节点都添加不同的图片
2. 选中这些节点(Ctrl+点击多选)
3. 按 Ctrl+C 复制

**Tab2操作:**
1. 选中一个节点作为父节点
2. 按 Ctrl+V 粘贴
3. ✅ 验证: 所有粘贴的节点都应该包含各自的图片,且图片正常显示

### 测试场景4: 复制带子节点的节点树(子节点也有图片)

**Tab1操作:**
1. 创建一个节点树:
   - 父节点(带图片A)
     - 子节点1(带图片B)
     - 子节点2(带图片C)
2. 选中父节点
3. 按 Ctrl+C 复制

**Tab2操作:**
1. 选中一个节点作为父节点
2. 按 Ctrl+V 粘贴
3. ✅ 验证: 粘贴的节点树中,所有节点的图片都应该正常显示

### 测试场景5: 相同图片的去重

**Tab1操作:**
1. 创建两个节点,都使用相同的图片
2. 选中这两个节点
3. 按 Ctrl+C 复制

**Tab2操作:**
1. 选中一个节点作为父节点
2. 按 Ctrl+V 粘贴
3. ✅ 验证: 
   - 两个节点的图片都正常显示
   - 检查 renderTree.data.imgMap,相同的图片只存储一份

## 调试方法

在浏览器控制台中检查数据:

```javascript
// 查看当前画布的imgMap
console.log(mindMap.renderer.renderTree.data.imgMap)

// 查看剪贴板数据(复制后执行)
navigator.clipboard.readText().then(text => {
  const data = JSON.parse(text)
  console.log('剪贴板数据:', data)
  console.log('节点数据:', data.data)
  console.log('图片映射:', data.imgMap)
})
```

## 预期结果

所有测试场景都应该通过,图片在跨Tab复制粘贴后能够正常显示,不会出现图片丢失的情况。
